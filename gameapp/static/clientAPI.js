document.addEventListener("DOMContentLoaded", function () {
  const socket = io.connect();
  var room = "";

  //example for useing the creatRoom() function
  document.getElementById("join-btn").addEventListener("click", createRoom);

  function createRoom() {
    console.log("creating room");
    //Call this to create a lobby.
    //This will redirect to the subpage, with a link generated by the server.
    //It also moves the client into a socket.io room, which is later used to broadcast the gamechanges to all clients in this lobby / room
    socket.emit("create_room");
    socket.on("room_created", function (data) {
      console.log("lobby link: " + data.lobby_link);
      room = data.lobby_link;
      location.replace(document.URL + "game/" + data.lobby_link);
    });
  }

  function sendChatMessage(message) {
    //This sends the provided string as a message to the lobbys chat
    socket.broadcast.emit("chat_message", { message: message, room: room });
  }

  function supposeMove(gamechanges) {
    socket.broadcast.emit("sup_move", { move: gamechanges, room: room });
  }
});
