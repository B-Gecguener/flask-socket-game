document.addEventListener("DOMContentLoaded", function () {
  const socket = io.connect();

  connectToRoom(room);

  //example for useing the creatRoom() function
  document.getElementById("join-btn").addEventListener("click", createRoom);

  function createRoom() {
    console.log("creating room");
    //Call this to create a lobby.
    //This will redirect to the subpage, with a link generated by the server.

    socket.emit("create_room");
    socket.on("room_created", function (data) {});
  }

  function connectToRoom(room) {
    //Call this apon connecting to the game room
    //Moves the client into a socket.io room, which is later used to broadcast the gamechanges to all clients in this lobby / room
    socket.emit("connect_me", room);
    console.log("asking for connection on " + room);
    socket.on("connected_to_room", function () {
      console.log("successfully connected to " + room + "!");
    });
  }

  function sendChatMessage(message) {
    //This sends the provided string as a message to the lobbys chat
    socket.broadcast.emit("chat_message", { message: message, room: room });
  }

  function supposeMove(gamechanges) {
    socket.broadcast.emit("sup_move", { move: gamechanges, room: room });
  }
});
